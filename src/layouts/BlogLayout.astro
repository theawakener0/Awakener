---
import BaseLayout from './BaseLayout.astro';
import Header from '../components/Header.astro';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
  tags?: string[];
  minutesRead: number;
  wordCount: number;
}

const { 
  title, 
  description, 
  pubDate, 
  updatedDate,
  tags = [],
  minutesRead,
  wordCount
} = Astro.props;

const formattedDate = pubDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

const breadcrumb = `~/blog/${title.toLowerCase().replace(/\s+/g, '-')}`;
---

<BaseLayout 
  title={title}
  description={description}
  type="article"
  publishedTime={pubDate.toISOString()}
/>
  <Header />
  
  <main class="min-h-screen pt-24 pb-24 px-6 relative z-10">
    <article class="max-w-3xl mx-auto">
      <!-- Breadcrumb -->
      <nav class="font-mono text-sm text-secondary mb-8" aria-label="Breadcrumb">
        <a href="/" class="hover:text-white transition-colors">~</a>
        <span class="opacity-50"> / </span>
        <a href="/blog" class="hover:text-white transition-colors">blog</a>
        <span class="opacity-50"> / </span>
        <span>{title.toLowerCase().replace(/\s+/g, '-')}</span>
      </nav>
      
      <!-- Header -->
      <header class="mb-10 sm:mb-12 stagger">
        <h1 class="font-serif text-3xl sm:text-4xl md:text-5xl mb-6 leading-tight">
          {title}
        </h1>
        
        <!-- Meta info -->
        <div class="font-mono text-sm text-secondary border-l-2 border-white/20 pl-4 space-y-2">
          <div class="flex flex-wrap items-center gap-2">
            <span>{formattedDate}</span>
            {updatedDate && (
              <span class="opacity-60">
                (updated {updatedDate.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })})
              </span>
            )}
          </div>
          
          <div class="flex items-center gap-2">
            <span>{minutesRead} min read</span>
            <span class="opacity-60">· {wordCount} words</span>
          </div>
          
          {tags.length > 0 && (
            <div class="flex flex-wrap items-center gap-2 pt-2">
              {tags.map(tag => (
                <span class="opacity-70">#{tag}</span>
              ))}
            </div>
          )}
        </div>
      </header>
      
      <!-- Content -->
      <div class="prose max-w-none">
        <slot />
      </div>
      
      <!-- Footer -->
      <footer class="mt-12 sm:mt-16">
        <a 
          href="/blog" 
          class="font-mono text-sm text-secondary hover:text-white transition-colors link-underline"
        >
          ← Back to blog
        </a>
      </footer>
    </article>
  </main>
</BaseLayout>
